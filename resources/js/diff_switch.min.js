var enableDiffSwitch=function(e){var t,n=document.getElementById("diff"),d=document.createElement("a");d.className="diff-switch",d.text=e.i18n.diffSideBySide,d.href="#",d.addEventListener("click",function(i){if(i.preventDefault(),document.getElementById("diff-table"))t.style.length?(n.style="display: none",t.style="",d.text=e.i18n.diffList,d.className="diff-switch diff-switch-list"):(n.style="",t.style="display: none",d.text=e.i18n.diffSideBySide,d.className="diff-switch");else{(t=document.createElement("table")).id="diff-table";var l,a;Array.prototype.forEach.call(n.children[0].children,function(e,n){if(a&&2!=a.children.length&&"SPAN"!=e.children[0].tagName||(a&&1==a.children.length&&("INS"==l?a.insertBefore(document.createElement("td"),a.children[0]):a.appendChild(document.createElement("td"))),a=document.createElement("tr"),t.appendChild(a),l=""),!l||"SPAN"==e.children[0].tagName||"DEL"==e.children[0].tagName&&"INS"==l||"INS"==e.children[0].tagName&&"DEL"==l){(d=document.createElement("td")).innerHTML=e.innerHTML,d.className="diff-col-"+e.children[0].tagName.toLowerCase(),a.appendChild(d),"SPAN"==e.children[0].tagName&&a.appendChild(d.cloneNode(!0))}else if(l==e.children[0].tagName){"INS"==l?a.insertBefore(document.createElement("td"),a.children[0]):a.appendChild(document.createElement("td"));var d;(d=document.createElement("td")).innerHTML=e.innerHTML,d.className="diff-col-"+e.children[0].tagName.toLowerCase(),(a=document.createElement("tr")).appendChild(d),t.appendChild(a)}l=e.children[0].tagName}),a&&1==a.children.length&&("INS"==l?a.insertBefore(document.createElement("td"),a.children[0]):a.appendChild(document.createElement("td"))),n.parentNode.appendChild(t),n.style="display: none",d.text=e.i18n.diffList,d.className="diff-switch diff-switch-list"}}),n.parentNode.insertBefore(d,n)};